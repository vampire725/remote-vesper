# OpenTelemetry åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ

ä¸€å¥—å®Œæ•´çš„ OpenTelemetry åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ Docker éƒ¨ç½²æ–¹æ¡ˆï¼ŒåŒ…å« Collectorã€Tempoã€Grafana å’Œ Prometheusã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
tempo-deploy/
â”œâ”€â”€ scripts/                      # ğŸ”§ ç®¡ç†è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ start-all.sh              # å®Œæ•´å¯åŠ¨ç³»ç»Ÿ
â”‚   â”œâ”€â”€ start-existing.sh         # å¿«é€Ÿå¯åŠ¨å·²æœ‰å®¹å™¨
â”‚   â”œâ”€â”€ stop-all.sh               # åœæ­¢æ‰€æœ‰æœåŠ¡
â”‚   â”œâ”€â”€ cleanup.sh                # å®Œå…¨æ¸…ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ status.sh                 # æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
â”‚   â”œâ”€â”€ logs.sh                   # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
â”‚   â”œâ”€â”€ send-test-data.sh         # å‘é€ç®€å•æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ generate-trace-data.sh    # ç”Ÿæˆå¤§é‡è¿½è¸ªæ•°æ® ğŸ†•
â”‚   â”œâ”€â”€ generate-service-graph.sh # ç”ŸæˆæœåŠ¡å›¾æ•°æ® ğŸ†•
â”‚   â”œâ”€â”€ check-service-graph.sh    # æ£€æŸ¥æœåŠ¡å›¾
â”‚   â””â”€â”€ SCRIPTS-GUIDE.md          # è¯¦ç»†è„šæœ¬ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ collector/                    # OpenTelemetry Collector é…ç½®
â”œâ”€â”€ tempo/                        # Tempo è¿½è¸ªå­˜å‚¨é…ç½®
â”œâ”€â”€ grafana/                      # Grafana å¯è§†åŒ–é…ç½®
â”œâ”€â”€ prometheus/                   # Prometheus æŒ‡æ ‡æ”¶é›†é…ç½®
â””â”€â”€ README.md                     # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿›å…¥è„šæœ¬ç›®å½•
```bash
cd tempo-deploy/scripts
```

### 2. ä¸€é”®å¯åŠ¨ç³»ç»Ÿ
```bash
./start-all.sh
```

### 3. å‘é€æµ‹è¯•æ•°æ®
```bash
./send-test-data.sh
```

### 4. è®¿é—®æœåŠ¡
- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **Tempo**: http://localhost:3200

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ğŸ¯ å¸¸ç”¨å‘½ä»¤
```bash
# è¿›å…¥è„šæœ¬ç›®å½•ï¼ˆå¿…é¡»ï¼ï¼‰
cd tempo-deploy/scripts

# å®Œæ•´å¯åŠ¨
./start-all.sh

# å¿«é€Ÿå¯åŠ¨ï¼ˆä½¿ç”¨ç°æœ‰å®¹å™¨ï¼‰
./start-existing.sh

# æŸ¥çœ‹çŠ¶æ€
./status.sh

# æŸ¥çœ‹æ—¥å¿—
./logs.sh [æœåŠ¡å]

# åœæ­¢æœåŠ¡ï¼ˆä¿ç•™æ•°æ®ï¼‰
./stop-all.sh

# å®Œå…¨æ¸…ç†ï¼ˆåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
./cleanup.sh
```

### ğŸ†• æ•°æ®ç”Ÿæˆå‘½ä»¤
```bash
# å¿«é€ŸéªŒè¯ç³»ç»Ÿ
./send-test-data.sh

# ç”Ÿæˆå¤§é‡è¿½è¸ªæ•°æ®ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰
./generate-trace-data.sh -b 50 -s 20

# ç”ŸæˆæœåŠ¡å›¾æ•°æ®ï¼ˆæ‹“æ‰‘æ¼”ç¤ºï¼‰
./generate-service-graph.sh -p ecommerce

# æŒç»­æ•°æ®ç”Ÿæˆï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰
./generate-trace-data.sh -c &

# æ£€æŸ¥æœåŠ¡å›¾çŠ¶æ€
./check-service-graph.sh
```

### âš ï¸ é‡è¦æé†’
- **æ‰€æœ‰è„šæœ¬å¿…é¡»åœ¨ `scripts/` ç›®å½•ä¸‹æ‰§è¡Œ**
- ç¡®ä¿ Docker å·²å¯åŠ¨
- ç«¯å£ 3000ã€3200ã€4315ã€4316ã€8889ã€9090ã€13133 éœ€è¦ç©ºé—²

## ğŸ”§ æ•…éšœæ’é™¤

1. **è„šæœ¬æ— æ³•æ‰§è¡Œ**: æ£€æŸ¥æ˜¯å¦åœ¨ `scripts/` ç›®å½•ä¸­
2. **ç«¯å£è¢«å ç”¨**: è¿è¡Œ `./stop-all.sh` åœæ­¢æœåŠ¡
3. **æœåŠ¡å¯åŠ¨å¤±è´¥**: è¿è¡Œ `./logs.sh [æœåŠ¡å]` æŸ¥çœ‹æ—¥å¿—
4. **æœåŠ¡å›¾ä¸æ˜¾ç¤º**: è¿è¡Œ `./check-service-graph.sh` è¯Šæ–­

## ğŸ“š è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹ [`scripts/SCRIPTS-GUIDE.md`](scripts/SCRIPTS-GUIDE.md) è·å–å®Œæ•´çš„è„šæœ¬ä½¿ç”¨æŒ‡å—ã€‚

## ğŸ‰ ç³»ç»Ÿç‰¹æ€§

- âœ… å®Œå…¨å®¹å™¨åŒ–éƒ¨ç½²
- âœ… ä¸€é”®å¯åŠ¨å’Œåœæ­¢
- âœ… è‡ªåŠ¨å¥åº·æ£€æŸ¥
- âœ… æœåŠ¡å›¾å¯è§†åŒ–
- âœ… åˆ†å¸ƒå¼è¿½è¸ªæ”¶é›†
- âœ… æŒ‡æ ‡ç›‘æ§é›†æˆ
- âœ… ç®€å•æµ‹è¯•æ•°æ®ç”Ÿæˆ
- âœ… å¤§é‡è¿½è¸ªæ•°æ®ç”Ÿæˆ ğŸ†•
- âœ… å¤æ‚æœåŠ¡æ‹“æ‰‘ç”Ÿæˆ ğŸ†•
- âœ… è¯¦ç»†æ•…éšœæ’é™¤

## ğŸ†• æ•°æ®ç”Ÿæˆå™¨åŠŸèƒ½

### generate-trace-data.sh - è¿½è¸ªæ•°æ®ç”Ÿæˆå™¨
- ğŸ“Š æ”¯æŒæ‰¹é‡ç”Ÿæˆå¤§é‡è¿½è¸ªæ•°æ®
- ğŸ¯ åŒ…å«14ç§ä¸åŒç±»å‹çš„æœåŠ¡
- ğŸ”„ æ¨¡æ‹Ÿ18ç§çœŸå®APIæ“ä½œ
- âš¡ å¯é…ç½®é”™è¯¯ç‡å’Œç”Ÿæˆé¢‘ç‡
- ğŸ”„ æ”¯æŒæŒç»­ç”Ÿæˆæ¨¡å¼

### generate-service-graph.sh - æœåŠ¡å›¾ç”Ÿæˆå™¨
- ğŸ—ï¸ 4ç§é¢„å®šä¹‰ä¸šåŠ¡æ‹“æ‰‘ï¼ˆç”µå•†ã€å¾®æœåŠ¡ã€æ•°æ®ç®¡é“ã€å¯è§‚æµ‹æ€§ï¼‰
- ğŸ”— çœŸå®çš„æœåŠ¡é—´è°ƒç”¨å…³ç³»
- ğŸ“Š è‡ªåŠ¨éªŒè¯æœåŠ¡å›¾ç”Ÿæˆ
- âš™ï¸ çµæ´»çš„é…ç½®é€‰é¡¹
- ğŸ“ˆ å®æ—¶ç”Ÿæˆè¿›åº¦ç›‘æ§

### ä½¿ç”¨åœºæ™¯
- **å¿«é€ŸéªŒè¯**: `./send-test-data.sh`
- **å‹åŠ›æµ‹è¯•**: `./generate-trace-data.sh -b 100 -s 50 -c`
- **æ¶æ„æ¼”ç¤º**: `./generate-service-graph.sh -p ecommerce -v`
- **é•¿æœŸç›‘æ§**: `./generate-trace-data.sh -c &` 